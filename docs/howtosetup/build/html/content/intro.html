

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Introduction &mdash; A4MCAR Introduction and Setup 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="A4MCAR Introduction and Setup 1.0 documentation" href="../index.html"/>
        <link rel="next" title="2. Google Summer of Code Participation" href="gsoc.html"/>
        <link rel="prev" title="Welcome to A4MCAR’s Introduction and Setup Manual" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> A4MCAR Introduction and Setup
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#scope">1.1. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a4mcar">1.2. What is A4MCAR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-app4mc">1.3. What is APP4MC?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#objectives-of-a4mcar-project">1.4. Objectives of A4MCAR Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a4mcar-methodology-and-features">1.5. A4MCAR Methodology and Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#future-developments">1.6. Future Developments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gsoc.html">2. Google Summer of Code Participation</a></li>
<li class="toctree-l1"><a class="reference internal" href="more.html">3. Accessing the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">4. Hardware Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">5. Software Setup</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">A4MCAR Introduction and Setup</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>1. Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/content/intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="introduction">
<h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="scope">
<h2>1.1. Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h2>
<p>This application manual is dedicated to explaining how to set up applications on A4MCAR. For more detailed documentation towards the research goals and tool support, it is advised to check our research documentation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are looking to <strong>download the project</strong> or <strong>see the comprehensive information</strong> please jump to <a class="reference internal" href="more.html#accessingtheproject"><span class="std std-ref">Accessing the Project</span></a>.</p>
</div>
</div>
<div class="section" id="what-is-a4mcar">
<h2>1.2. What is A4MCAR?<a class="headerlink" href="#what-is-a4mcar" title="Permalink to this headline">¶</a></h2>
<p>A4MCAR is a distributed and multi-core demonstrator RC-Car that is used in the demonstration of parallel applications on real embedded systems. It is originally developed to test and evaluate APP4MC tool. A4MCAR is a project that is developed in FH Dortmund IDiAL and is supported under Project AMALTHEA4public. The project is also granted by The Eclipse Foundation and Google Inc. during the participation to Google Summer of Code 2017 event. During the event, the developed applications have been distributed in open-source manner under Eclipse Public License (EPL). Thus, we hope to help those in the open-source community who are willing to address concurrency in their multi-core embedded applications with the help of the GSoC event.</p>
<div class="align-center figure" id="id2">
<a class="reference internal image-reference" href="../_images/a4mcar.png"><img alt="A4MCAR" src="../_images/a4mcar.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">A4MCAR</span></p>
</div>
<p>The demonstrator system features not only low level functionalities such as sensor and motor driving but also high level features such as image processing, camera streaming, server-based wireless driving via Web, bluetooth connectivity via Android application, system core monitoring and analysis features and touchscreen UI. Our experiments along the multi-task heterogeneous demonstrator A4MCAR show that using APP4MC results instead of OS-based or sequential implementations on a distributed heterogeneous system significantly improves its responsiveness in order to potentially reduce energy consumption and replaces error prone manual constraint considerations for mixed-critical applications.</p>
</div>
<div class="section" id="what-is-app4mc">
<h2>1.3. What is APP4MC?<a class="headerlink" href="#what-is-app4mc" title="Permalink to this headline">¶</a></h2>
<p>While there exist some commercial tools that provide easement in the parallel software development, recent study done in Germany, namely <a class="reference external" href="http://www.amalthea-project.org/">AMALTHEA4public</a>, aims to provide planning and tracing tools especially for multi-core developments in automotive domain with several open source development tools.</p>
<p><a class="reference external" href="http://www.eclipse.org/app4mc">The APP4MC project</a> provides an Eclipse-based tool chain environment and a de-facto model standard to integrate tools for all major design steps in the multi- and many-core development phase. A basic set of tools are available to demonstrate all the steps needed in the development process. The APP4MC project aims at providing according to <a class="reference internal" href="#app4mcproposaleclipse" id="id1">[App4mcProposalEclipse]</a>:</p>
<ul class="simple">
<li>A basis for the integration of various tools into a consistent and comprehensive tool chain.</li>
<li>Extensive models for timing behaviour, software, hardware, and constraints descriptions (used for simulation / analysis and for data exchange).</li>
<li>Editors and domain specific languages for the models.</li>
<li>Tools for scheduling, partitioning, and optimizing of multi- and many-core architectures.</li>
</ul>
<p>APP4MC targets multi-core and many-core platforms, while the main focus is the optimization of embedded multi-core systems . Due to its focus, APP4MC is partnered with many automotive OEMs and part suppliers that deal with embedded software engineering.  Furthermore, it supports interoperability and extensibility and unifies data exchange in cross-organizational projects. Additionaly, since APP4MC uses Eclipse platform to its purposes, the development environment has a complete open-source nature under <a class="reference external" href="https://www.eclipse.org/legal/epl-v10.html">Eclipse Public License (EPL)</a>.</p>
<p>Eclipse APP4MC platform editor window can be seen in the following figure:</p>
<div class="align-center figure" id="id3">
<a class="reference internal image-reference" href="../_images/app4mcenv.png"><img alt="Eclipse APP4MC platform Editor Window" src="../_images/app4mcenv.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">Eclipse APP4MC platform Editor Window</span></p>
</div>
<p>In the figure, Explorer window is used for finding models, performing operations such as partitioning, task generation, mapping, and model migration. The tree editor shows the hierarchical structure of the selected AMALTHEA model, whereas the Element Properties window is used for editing the properties of AMALTHEA model elements selected in the Tree Editor.</p>
<p>APP4MC is a project that has a lot of synergies with its predecessor AMALTHEA4public project. APP4MC uses AMALTHEA models, which are XML models that describe software components and hardware platforms. Main operation of APP4MC involves modeling the system by creating AMALTHEA models and performing partitioning, mapping, optimization on parallel programs. APP4MC also has the ability to trace simulate parallel programs. Basic ingredients for an AMALTHEA model is illustrated in the following figure:</p>
<div class="align-center figure" id="id4">
<a class="reference internal image-reference" href="../_images/app4mcmodel.png"><img alt="AMALTHEA Model for APP4MC" src="../_images/app4mcmodel.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">AMALTHEA Model for APP4MC</span></p>
</div>
<p>It is seen that AMALTHEA model can contain software decisions, costs, constraints, as well it can contain hardware platform information. Constraint models are used to define process groups to make sure some processes belong together. Furthermore, a target platform dependency of a process group is also modeled using constraints model.</p>
<p>An illustration of how parallel software can be designed for embedded multi-core platforms are given in the <a class="reference internal" href="#app4mcdesign"><span class="std std-ref">Illustration of how parallel software are designed using APP4MC platform</span></a>. The following remarks can be made regarding the design procedure with APP4MC platform:</p>
<ul class="simple">
<li><strong>Modeling</strong>: Design of a parallel software starts with modeling in APP4MC. An AMALTHEA model is constructed that involves three seperate models: (1)- hardware model, (2)-software model, (3)-constraints model. In the hardware model, each distributed ECU is modeled in a hierarchical  manner. Hardware model involves information such as number of processor cores, system clock frequency for processors, and memory details. In the software model, runnables are modeled. Runnables are found with the help of binary analysis tools and by using the decomposition technique mentioned in the Section ref{designtech}. Each runnable are modeled by making use of information such as granularity (number of instructions) and label accesses (memory read-write). In the early development stages, model contains a rough model of the software, but the model is constantly improved by using the Tracing functionality of the APP4MC as well it can be improved by using several other tracing software.</li>
<li><strong>Partitioning</strong>: Partitioning stage in APP4MC-aided parallel design corresponds to identification of initial tasks. After an initial AMALTHEA model is constructed, the one can perform partitioning in APP4MC by simply selecting the model and pressing the “Perform Partitioning” button. At this stage, APP4MC will analyze the runnables and runnable label accesses in order to suggest how tasks should look like for a balanced parallel distribution. APP4MC uses two partitioning algorithms that are ESSP (Earliest Start Schedule Partitioning) (performed by default) and CPP (Critical Path Partitioning) in order to find the partitions of the system. ESSP and CPP algorithms are based on the Graph Theory which is commonly used in hardware and software co-design. Partitioning algorithms are used for analysis of the granularity and communication costs of individual runnables and create best possible parallelized partitions.</li>
<li><strong>Task Generation</strong>: Initial tasks (partitions) are finalized by pressing “Generate Tasks” button. By making use of the dependencies between partitions and by grouping them, APP4MC generates a model that contains the desired amount of tasks with the help of “Task Generation” phase.</li>
<li><strong>Mapping (with Simulation and Optimization)</strong>: As known, mapping is the stage of placing the software distributions (tasks, processes, threads) into the processors. By making use of the hardware capabilities and using optimization strategies (such as Integer Linear Programming), APP4MC is able to find a mapping model of the system. The utilization details of the simulations will be seen at the end of the mapping stage.</li>
<li><strong>Code Generation</strong>: Since APP4MC provides model-based development, code generation features for C language are available. If desired, APP4MC generates tasks that are written in C language by using the AMALTHEA system model.</li>
<li><strong>Tracing</strong>: By making use of binary tracing, AMALTHEA trace model can be observed and can be re-used to update the system model.</li>
</ul>
<div class="align-center figure" id="id5">
<span id="app4mcdesign"></span><a class="reference internal image-reference" href="../_images/app4mcdesign.png"><img alt="Illustration of how parallel software are designed using APP4MC platform" src="../_images/app4mcdesign.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">Illustration of how parallel software are designed using APP4MC platform</span></p>
</div>
<p>APP4MC promises beneficial set of tools for embedded parallel software development. However, the demonstration of its features is needed for further improvement. Therefore, in this work APP4MC is used for system parallelization for A4MCAR, a demonstrator RC-Car.</p>
</div>
<div class="section" id="objectives-of-a4mcar-project">
<h2>1.4. Objectives of A4MCAR Project<a class="headerlink" href="#objectives-of-a4mcar-project" title="Permalink to this headline">¶</a></h2>
<p>With A4MCAR project, we aim to investigate and evaluate APP4MC’s performance with a real-world distributed multi-core system in several aspects. The objectives of this project are as follows:</p>
<ul class="simple">
<li>Development of a distributed multi-core demonstrator for the APP4MC platform that involves typical automotive application features.</li>
<li>Investigation of new trends in parallel software development (such as Real-time Linux parallel programming, POSIX threads, RTOS, evaluation methods etc.)</li>
<li>Researching techniques to retrieve information (number of instructions, communication costs) and system trace from platforms such as xCORE and Linux to achieve precise modelling with APP4MC.</li>
<li>In order to achieve optimization goals such as reduced energy consumption and reduced resource usage, different affinity constrained software distributions will be evaluated and energy features will be invoked to see if the goals can be achieved.</li>
<li>Developing a basic online parallelization evaluation software that will retrieve scheduling properties such as slack times, execution times, and deadlines from all the processes and that will tell which deadlines were met and which not. Also, the software distribution assessment is in focus as well as investigating methods to develop schedulable and traceable threads and processes.</li>
<li>Recording detailed system traces in order to provide offline software evaluation and consequently figuring out means to balance the load on cores.</li>
<li>Comparing the conventional schedulers of non-constrained affinity distribution (such as a Linux OS scheduler) to the affinity constrained distribution from APP4MC to see if performance can be improved.</li>
</ul>
<p>With the help of the A4MCAR project, it is intended that the Real-time Linux community will benefit from the published libraries and documentation that involve code snippets and information instructions on how to develop more optimized distributed and parallel software. Furthermore, the Eclipse APP4MC community will benefit from the A4MCAR via advanced tool support for RPI developments, open source example applications, and validations of APP4MC parallelization results in order to create a better tooling available to the public. Those results can be used to assess and compare different parallelization scenarios and consequently identify optimal solutions regarding timing efficiency for the A4MCAR. Thereby, a point of reference can be given as well as an easy starting point for developers approaching parallelism with their developments.</p>
</div>
<div class="section" id="a4mcar-methodology-and-features">
<h2>1.5. A4MCAR Methodology and Features<a class="headerlink" href="#a4mcar-methodology-and-features" title="Permalink to this headline">¶</a></h2>
<p>As A4MCAR targets automotive industry and parallelization studies done by APP4MC, it features not only sensing and actuation related features but also applications that would help with task to core distributions and parallelization performance evaluation. One could see the featured applications for the A4MCAR in <a class="reference internal" href="#tasksoverall"><span class="std std-ref">Applications developed and/or maintained for A4MCAR</span></a>.</p>
<div class="align-center figure" id="id6">
<span id="tasksoverall"></span><a class="reference internal image-reference" href="../_images/tasksoverall.png"><img alt="Applications developed and/or maintained for A4MCAR" src="../_images/tasksoverall.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text">Applications developed and/or maintained for A4MCAR</span></p>
</div>
<p>In the figure, it is seen that the low level module of A4MCAR, built using xCore-200 eXplorerKIT targets mostly actuation and sensing related applications. The full list of tasks developed for the low-level module includes:</p>
<ul class="simple">
<li>Core monitoring applications for each tile (two exist) that calculates the average core usages.</li>
<li>Bluetooth task to configure bluetooth module in slave mode and receive data over UART interface.</li>
<li>Proximity measurement task that obtaines the distance sensor information from four SR-04 sensors over an I2C sensor network.</li>
<li>Speed control task in order to use PWM to drive speed controlling motor.</li>
<li>Steering task that controls a servo motor using PWM signaling in order to steer the A4MCAR using external inputs.</li>
<li>Light system task in order to control a light module for certain conditions.</li>
<li>Ethernet server task to maintain a TCP server for data reception and transmission from high level module.</li>
<li>TCP task and several other ethernet configuration related tasks to configure ethernet module (PHY) drivers and establish proper TCP connection.</li>
</ul>
<p>In order to investigate parallelization outcomes on Real-time Linux and make use of high level features such as web server, image processing and touchscreen interface high-level module is introduced to the system. High-level module is designed so that it can communicate with low-level module over TCP in order to send driving information and retrieve core information from low-level module. It is important to mention that high-level module uses Raspberry Pi 3 in order to achieve high level tasks using a robust Debian-based OS, namely Raspbian. Although the features of the high-level module is illustrated in the following figure, full feature list can be given as follows:</p>
<ul class="simple">
<li>Core monitoring application that calculates the average core usages on each core.</li>
<li>Image processing application that helps to find a traffic cone.</li>
<li>Apache Web Server that is used to host a web page which shows average core usage, show Raspberry Pi 3 camera (Raspicam) stream and helps to drive the A4MCAR via web page controls.</li>
<li>Ethernet client application that writes handles data transmission and reception to and from server using file operations and data parsing.</li>
<li>Camera and streaming application that starts the Raspicam and maintains the stream using configuration parameters such as resolution, quality, frame rate, port and etc.</li>
<li>A webpage which is used for driving the A4MCAR as well as display core usages on each core and Raspicam stream.</li>
<li>A touchscreen display application which is used for displaying all cores and their utilization, starting and killing all applications on high-level module, allocation of processes on high-level module to cores dynamically, visualization of timing related performance indicators such as average slack time and deadline misses percentage, selecting different distributions, and configuration of the IP addresses on high-level module.</li>
<li>Dummy load processes that perform random matrix multiplication in order to find performance indicators in full utilization.</li>
<li>Several Linux processes that run Linux OS kernel and VNC server process that provides PC connection via SSH connection.</li>
</ul>
</div>
<div class="section" id="future-developments">
<h2>1.6. Future Developments<a class="headerlink" href="#future-developments" title="Permalink to this headline">¶</a></h2>
<p>Future developments involve:</p>
<ul class="simple">
<li>AGL (Automotive Grade Linux) or Apertis Linux distro integration of the applications.</li>
<li>Developing more applications in the direction of IoT.</li>
<li>Developing Eclipse Hono interaction library and involving Cloud interactions in parallel with APPSTACLE project.</li>
</ul>
<table class="docutils citation" frame="void" id="app4mcproposaleclipse" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[App4mcProposalEclipse]</a></td><td><a class="reference external" href="https://projects.eclipse.org/proposals/app4mc">https://projects.eclipse.org/proposals/app4mc</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gsoc.html" class="btn btn-neutral float-right" title="2. Google Summer of Code Participation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Welcome to A4MCAR’s Introduction and Setup Manual" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, FH Dortmund.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>